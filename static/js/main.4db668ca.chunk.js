(this.webpackJsonpair_pollution=this.webpackJsonpair_pollution||[]).push([[0],{164:function(t,e,a){"use strict";a.r(e);var n=a(0),i=a.n(n),o=a(30),s=a.n(o),l=(a(54),a(3)),r=a(4),c=a(12),m=a(6),u=a(5),d=function(t){Object(m.a)(a,t);var e=Object(u.a)(a);function a(){return Object(l.a)(this,a),e.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){return i.a.createElement("div",{id:"InputCity",className:"row mt-4"},i.a.createElement("div",{className:"col-md-12 d-flex justify-content-center"},i.a.createElement("h1",{id:"MainTitle"},"Check the air quality in your city.")),i.a.createElement("div",{className:"col-md-12 d-flex justify-content-center mt-5"},i.a.createElement("form",{className:"form-inline",autoComplete:"off",onSubmit:this.props.getStations},i.a.createElement("div",{className:"form-group d-flex justify-content-center mb-0"},i.a.createElement("input",{className:"form-control mr-2",type:"text",name:"city",placeholder:"Enter city name ..."}),i.a.createElement("button",{className:"btn btn-pollution",type:"submit"},"Download ")))))}}]),a}(i.a.Component),p=a(13),h=a.n(p),v=function(t){Object(m.a)(a,t);var e=Object(u.a)(a);function a(){return Object(l.a)(this,a),e.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){return this.props.loadingTownList?i.a.createElement("div",{className:"row mt-3"},i.a.createElement("div",{className:"col-md-12 d-flex justify-content-center"},i.a.createElement("img",{src:"rings.svg",alt:"loading"}))):this.props.stationListStatus?("ok"===this.props.stationListStatus?this.stationListStatus="":this.stationListStatus=this.props.stationListStatus,i.a.createElement("div",null,i.a.createElement(h.a,{transitionName:"fade",transitionAppear:!0,transitionEnter:!1,transitionLeave:!1,transitionEnterTimeout:1e3,transitionLeaveTimeout:1e3,transitionAppearTimeout:1e3},i.a.createElement("div",{className:"row mt-3"},i.a.createElement("div",{className:"col-md-12 d-flex justify-content-center"},this.stationListStatus&&i.a.createElement("h2",null,this.stationListStatus),i.a.createElement("br",null)," ",this.props.stationList&&i.a.createElement("form",null,i.a.createElement("div",{className:"form-group mt-2 mr-2 mb-0"},i.a.createElement("select",{className:"form-control",value:this.props.selectedStation,onChange:this.props.getStationPollution},i.a.createElement("option",{disabled:!0,selected:!0,value:!0}),this.props.stationList.map((function(t){return i.a.createElement("option",{key:t.uid,value:t.uid},t.station.name)})))))))))):(this.refreshStationPollution=this.props.refreshStationPollution,i.a.createElement("div",null,i.a.createElement(h.a,{transitionName:"fade",transitionAppear:!0,transitionEnter:!1,transitionLeave:!1,transitionEnterTimeout:1e3,transitionLeaveTimeout:1e3,transitionAppearTimeout:1e3},i.a.createElement("div",{className:"row mt-3"},i.a.createElement("div",{className:"col-md-12 d-flex justify-content-center"},i.a.createElement("br",null)," ",this.props.stationList&&i.a.createElement("form",{className:"form-inline"},i.a.createElement("div",{className:"form-group mt-2 mr-2 mb-0"},i.a.createElement("select",{className:"form-control",value:this.props.selectedStation,onChange:this.props.getStationPollution},i.a.createElement("option",{disabled:!0,selected:!0,value:!0},"Select stations"),this.props.stationList.map((function(t){return i.a.createElement("option",{key:t.uid,value:t.uid},t.station.name)})))),i.a.createElement("button",{onClick:this.refreshStationPollution,type:"button",className:"btn btn-primary float-right mt-2"},"Refresh")))))))}}]),a}(i.a.Component),f=a(8),g={labels:["No2","So2","O3","PM10","PM2.5"],datasets:[{label:"Rainfall",backgroundColor:["#B21F00","#C9DE00","#2FDE00","#00A6B4","#6800B4"],hoverBackgroundColor:["#501800","#4B5000","#175000","#003350","#35014F"],data:[65,59,80,81,56]}]},E={labels:["No2","So2","O3","PM10","PM2.5"],datasets:[{label:"Pollution",backgroundColor:"rgba(75,192,192,1)",fill:!1,lineTension:.5,borderColor:"rgba(0,0,0,1)",borderWidth:2,data:[65,59,80,81,56]}]},b=function(t){Object(m.a)(a,t);var e=Object(u.a)(a);function a(t){var n;return Object(l.a)(this,a),(n=e.call(this,t)).info={pm25:{normalizer:100/71,name:"PM 2.5",norms:[[35,"bar-green"],[53,"bar-orange"],[71,"bar-red"]]},pm10:{normalizer:100/101,name:"PM 10",norms:[[40,"bar-green"],[75,"bar-orange"],[101,"bar-red"]]},no2:{normalizer:100/601,name:"No2",norms:[[200,"bar-green"],[400,"bar-orange"],[601,"bar-red"]]},so2:{normalizer:100/1065,name:"So2",norms:[[266,"bar-green"],[532,"bar-orange"],[1065,"bar-red"]]},o3:{normalizer:100/241,name:"o3",norms:[[100,"bar-green"],[160,"bar-orange"],[241,"bar-red"]]}},n}return Object(r.a)(a,[{key:"render",value:function(){var t=this;return this.props.stationStatus&&(this.stationStatus=this.props.stationStatus),this.props.stationName?this.stationName=this.props.stationName:this.stationName=null,this.props.stationPollution?this.stationPollution=this.props.stationPollution:this.stationPollution=null,this.props.loadingTownList?i.a.createElement("div",null):this.props.loadingStation?i.a.createElement("div",{className:"row mt-3"},i.a.createElement("div",{className:"col-md-12 d-flex justify-content-center"},i.a.createElement("img",{src:"rings.svg",alt:"loading"}))):i.a.createElement("div",null,i.a.createElement(h.a,{transitionName:"fade",transitionAppear:!0,transitionEnter:!1,transitionLeave:!1,transitionEnterTimeout:1e3,transitionLeaveTimeout:1e3,transitionAppearTimeout:1e3},i.a.createElement("div",{id:"ShowPollution",className:"row mt-4 mb-5"},i.a.createElement("div",{className:"col-md-12 d-flex justify-content-center"},this.stationName&&i.a.createElement("h2",{id:"CityTitle"},i.a.createElement("b",null,this.stationName))),i.a.createElement("div",{className:"col-md-12 d-flex justify-content-center pr-0 pl-0"},this.stationPollution&&i.a.createElement("div",{className:"col-md-10"},Object.keys(this.stationPollution).map((function(e,a){var n,o,s,l,r=t.stationPollution[e].v,c=t.info[e],m=r;if("pm25"===e||"pm10"===e||"no2"===e||"so2"===e||"o3"===e)return m=r*c.normalizer,o=c.norms[0][0]*c.normalizer,s=c.norms[1][0]*c.normalizer-o,l=c.norms[2][0]*c.normalizer-s-o,n=r<=c.norms[0][0]?c.norms[0][1]:r<=c.norms[1][0]?c.norms[1][1]:c.norms[2][1],i.a.createElement("div",{key:a,className:"row mt-2"},i.a.createElement("div",{className:"col-md-2 d-flex align-items-center justify-content-center"},i.a.createElement("h4",{className:"mb-0"},t.info[e].name)),i.a.createElement("div",{className:"col-md-10"},i.a.createElement("div",{className:"progress legend",style:{height:"3px"}},i.a.createElement("div",{className:"progress-bar bar-green-info",role:"progressbar",style:{width:o+"%"},"aria-valuenow":"15","aria-valuemin":"0","aria-valuemax":"100"}),i.a.createElement("div",{className:"progress-bar bar-orange-info",role:"progressbar",style:{width:s+"%"},"aria-valuenow":"30","aria-valuemin":"0","aria-valuemax":"100"}),i.a.createElement("div",{className:"progress-bar bar-red-info",role:"progressbar",style:{width:l+"%"},"aria-valuenow":"20","aria-valuemin":"0","aria-valuemax":"100"})),i.a.createElement("div",{className:"progress",style:{height:"30px"}},i.a.createElement("div",{className:"progress-bar "+n,role:"progressbar",style:{width:m+"%"},"aria-valuenow":t.stationPollution[e].v,"aria-valuemax":"10"},i.a.createElement("span",{className:"ml-2"},t.stationPollution[e].v)))))})))))),i.a.createElement("div",null,i.a.createElement("div",{className:"col-md-12 d-flex justify-content-center"},this.stationName&&i.a.createElement("h2",{id:"CityTitle"},i.a.createElement("b",null,this.stationName))),i.a.createElement("div",{className:"col-md-12 d-flex justify-content-center pr-0 pl-0"},this.stationPollution&&i.a.createElement("div",{className:"col-md-10"},i.a.createElement(f.Bar,{data:E,options:{title:{display:!0,text:"Stats",fontSize:20},legend:{display:!0,position:"right"}}})))),i.a.createElement("div",null,i.a.createElement("div",{className:"col-md-12 d-flex justify-content-center"},this.stationName&&i.a.createElement("h2",{id:"CityTitle"},i.a.createElement("b",null,this.stationName))),i.a.createElement("div",{className:"col-md-12 d-flex justify-content-center pr-0 pl-0"},this.stationPollution&&i.a.createElement("div",{className:"col-md-10"},i.a.createElement(f.Line,{data:E,options:{title:{display:!0,text:"Pollution",fontSize:20},legend:{display:!0,position:"right"}}})))),i.a.createElement("div",null,i.a.createElement("div",{className:"col-md-12 d-flex justify-content-center"},this.stationName&&i.a.createElement("h2",{id:"CityTitle"},i.a.createElement("b",null,this.stationName))),i.a.createElement("div",{className:"col-md-12 d-flex justify-content-center pr-0 pl-0"},this.stationPollution&&i.a.createElement("div",{className:"col-md-10"},i.a.createElement(f.Pie,{data:g,options:{title:{display:!0,text:"Pollution During Day",fontSize:20},legend:{display:!0,position:"right"}}}),i.a.createElement(f.Doughnut,{data:g,options:{title:{display:!0,text:"Pollution During Day",fontSize:20},legend:{display:!0,position:"right"}}}),"/>"))))}}]),a}(i.a.Component),S=function(t){Object(m.a)(a,t);var e=Object(u.a)(a);function a(t){var n;return Object(l.a)(this,a),(n=e.call(this,t)).state={stationListStatus:void 0,stationList:void 0,stationName:void 0,stationStatus:void 0,selectedStation:void 0,stationPollution:void 0,loadingTownList:!1,loadingStation:!1},n.getStations=function(t){t.preventDefault(),n.setState({stationListStatus:void 0,stationList:{status:"ok",data:{iaqi:{brak:{v:"Brak danych"}}}},loadingTownList:!0,selectedStation:void 0,stationName:null,stationPollution:void 0});var e=t.target.elements.city.value;fetch("https://api.waqi.info/search/?keyword=".concat(e,"&token=7c200db3b52810d3f6a68b989445e0289d3428b8")).then((function(t){return t.json()})).then((function(t){0===t.data.length?n.setState({stationListStatus:"Unfortunately we found nothing. We can suggest checking for missing Polish characters. We will improve it soon ...",stationList:void 0,loadingTownList:!1}):n.setState({stationListStatus:t.status,stationList:t.data,loadingTownList:!1})}))},n.getStationPollution=function(t){n.setState({stationListStatus:void 0,stationName:void 0,stationStatus:void 0,stationPollution:void 0,loadingStation:!0,selectedStation:t.target.value});var e=t.target.value;fetch("https://api.waqi.info/feed/@".concat(e,"/?token=7c200db3b52810d3f6a68b989445e0289d3428b8")).then((function(t){return n.setState({stationPollution:void 0,loadingStation:!0}),t.json()})).then((function(t){return((t||{}).data||{}).iaqi?n.setState({stationName:t.data.city.name,stationStatus:t.status,stationPollution:t.data.iaqi,loadingStation:!1}):((t||{}).status,n.setState({stationName:"No data available, please try in a moment.",stationStatus:t.status,stationPollution:null,loadingStation:!1})),t})).catch((function(t){console.log("Error: ",t),n.setState({stationName:"Error",stationPollution:void 0,stationStatus:"Error",loadingStation:!1})}))},n.refreshStationPollution=function(){var t=n.state.selectedStation;fetch("https://api.waqi.info/feed/@".concat(t,"/?token=7c200db3b52810d3f6a68b989445e0289d3428b8")).then((function(t){return n.setState({stationPollution:void 0,loadingStation:!0}),t.json()})).then((function(t){return((t||{}).data||{}).iaqi?n.setState({stationName:t.data.city.name,stationStatus:t.status,stationPollution:t.data.iaqi,loadingStation:!1}):((t||{}).status,n.setState({stationName:"No data available, please try in a moment.",stationStatus:t.status,stationPollution:null,loadingStation:!1})),t})).catch((function(t){console.log("Error: ",t),n.setState({stationName:"Error",stationPollution:void 0,stationStatus:"Error",loadingStation:!1})}))},n.getStationPollution=n.getStationPollution.bind(Object(c.a)(n)),n.refreshStationPollution=n.refreshStationPollution.bind(Object(c.a)(n)),n}return Object(r.a)(a,[{key:"render",value:function(){return i.a.createElement("div",{id:"MainView",className:"container-fluid d-flex align-items-center pl-0 pr-0"},i.a.createElement("div",{className:"container "},i.a.createElement(d,{getStations:this.getStations}),i.a.createElement(v,{stationListStatus:this.state.stationListStatus,stationList:this.state.stationList,selectedStation:this.state.selectedStation,getStationPollution:this.getStationPollution,getCityStation:this.getCityStation,loadingTownList:this.state.loadingTownList,refreshStationPollution:this.refreshStationPollution}),i.a.createElement(b,{stationPollution:this.state.stationPollution,stationName:this.state.stationName,stationStatus:this.state.stationStatus,loadingStation:this.state.loadingStation,loadingTownList:this.state.loadingTownList})))}}]),a}(i.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(S,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},49:function(t,e,a){t.exports=a(164)},54:function(t,e,a){}},[[49,1,2]]]);
//# sourceMappingURL=main.4db668ca.chunk.js.map